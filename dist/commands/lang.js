// Generated by CoffeeScript 2.5.1
module.exports.run = function(client, message, args) {
  var formattedLanguage, languages;
  languages = [["en", "English"], ["fr", "Français"], ["it", "Italiano"], ["es", "español"]];
  formattedLanguage = languages.map(function(l) {
    return `\`${l[0]}\` (${l[1]})`;
  }).join("\n");
  // Check if there is a new lang
  if (!args[0] || !languages.some(function(l) {
    return l[0] === args[0];
  })) {
    return client.createMessage(message.channel.id, `:x: You must specify a valid new language!
Available possibilies:
${formattedLanguage}`);
  }
  // Change the language
  client.db.set(`serversLanguages.${message.channel.guild.id}`, args[0]).write();
  
  // Reply
  return client.createMessage(message.channel.id, `Simsimi language updated to \`${languages.find(function(l) {
    return l[0] === args[0];
  })[1]}\``);
};

module.exports.help = {
  name: "lang",
  onlyMod: true
};
